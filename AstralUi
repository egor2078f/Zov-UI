--[[ 
    RAVION STYLE UI LIBRARY v2 (Remastered)
    Optimized for PC & Mobile
    Design: Dark, Red Accent, Rounded
]]

local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local CoreGui = game:GetService("CoreGui")

local Library = {}

--// Utility Functions
local function MakeDraggable(topbarobject, object)
	local Dragging = nil
	local DragInput = nil
	local DragStart = nil
	local StartPosition = nil

	local function Update(input)
		local Delta = input.Position - DragStart
		local pos = UDim2.new(StartPosition.X.Scale, StartPosition.X.Offset + Delta.X, StartPosition.Y.Scale, StartPosition.Y.Offset + Delta.Y)
		local Tween = TweenService:Create(object, TweenInfo.new(0.15), {Position = pos})
		Tween:Play()
	end

	topbarobject.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
			Dragging = true
			DragStart = input.Position
			StartPosition = object.Position

			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then
					Dragging = false
				end
			end)
		end
	end)

	topbarobject.InputChanged:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
			DragInput = input
		end
	end)

	UserInputService.InputChanged:Connect(function(input)
		if input == DragInput and Dragging then
			Update(input)
		end
	end)
end

--// UI Creation
function Library:Window(options)
	local TitleName = options.Name or "Ravion"
	local GameName = options.Game or "Unknown"
	
	-- Main ScreenGui
	local ScreenGui = Instance.new("ScreenGui")
	ScreenGui.Name = "RavionUI"
	ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
	
	-- Protection against basic checks
	if syn and syn.protect_gui then
		syn.protect_gui(ScreenGui)
		ScreenGui.Parent = CoreGui
	elseif gethui then
		ScreenGui.Parent = gethui()
	else
		ScreenGui.Parent = Players.LocalPlayer:WaitForChild("PlayerGui")
	end

	-- Main Frame
	local MainFrame = Instance.new("Frame")
	MainFrame.Name = "MainFrame"
	MainFrame.Parent = ScreenGui
	MainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20) -- Dark Background
	MainFrame.Position = UDim2.new(0.5, -175, 0.5, -125)
	MainFrame.Size = UDim2.new(0, 360, 0, 260) -- Slightly larger than requested for better touch target, but compact
	MainFrame.ClipsDescendants = true
	
	local MainCorner = Instance.new("UICorner")
	MainCorner.CornerRadius = UDim.new(0, 10)
	MainCorner.Parent = MainFrame
	
	local MainStroke = Instance.new("UIStroke")
	MainStroke.Parent = MainFrame
	MainStroke.Color = Color3.fromRGB(45, 45, 45)
	MainStroke.Thickness = 1

	-- Sidebar / Header (Top logic like Ravion)
	local Header = Instance.new("Frame")
	Header.Name = "Header"
	Header.Parent = MainFrame
	Header.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	Header.BackgroundTransparency = 1
	Header.Size = UDim2.new(1, 0, 0, 40)

	local Title = Instance.new("TextLabel")
	Title.Name = "Title"
	Title.Parent = Header
	Title.BackgroundTransparency = 1
	Title.Position = UDim2.new(0, 15, 0, 0)
	Title.Size = UDim2.new(0, 100, 1, 0)
	Title.Font = Enum.Font.GothamBold
	Title.RichText = true
	Title.Text = "<font color=\"rgb(255,50,50)\">R</font>AVION <font size=\"10\" color=\"rgb(150,150,150)\">v1.1</font>"
	Title.TextColor3 = Color3.fromRGB(255, 255, 255)
	Title.TextSize = 16
	Title.TextXAlignment = Enum.TextXAlignment.Left

	local CloseBtn = Instance.new("TextButton")
	CloseBtn.Name = "Close"
	CloseBtn.Parent = Header
	CloseBtn.BackgroundTransparency = 1
	CloseBtn.Position = UDim2.new(1, -35, 0, 0)
	CloseBtn.Size = UDim2.new(0, 35, 1, 0)
	CloseBtn.Font = Enum.Font.GothamBold
	CloseBtn.Text = "Ã—"
	CloseBtn.TextColor3 = Color3.fromRGB(150, 150, 150)
	CloseBtn.TextSize = 20
	CloseBtn.MouseButton1Click:Connect(function()
		ScreenGui:Destroy()
	end)

	-- Tab Container
	local TabContainer = Instance.new("ScrollingFrame")
	TabContainer.Name = "TabContainer"
	TabContainer.Parent = Header
	TabContainer.Active = true
	TabContainer.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	TabContainer.BackgroundTransparency = 1
	TabContainer.BorderSizePixel = 0
	TabContainer.Position = UDim2.new(0, 120, 0, 8)
	TabContainer.Size = UDim2.new(1, -160, 1, -16)
	TabContainer.CanvasSize = UDim2.new(0, 0, 0, 0)
	TabContainer.ScrollBarThickness = 0
	
	local TabLayout = Instance.new("UIListLayout")
	TabLayout.Parent = TabContainer
	TabLayout.FillDirection = Enum.FillDirection.Horizontal
	TabLayout.SortOrder = Enum.SortOrder.LayoutOrder
	TabLayout.Padding = UDim.new(0, 5)

	-- Pages Container
	local Pages = Instance.new("Frame")
	Pages.Name = "Pages"
	Pages.Parent = MainFrame
	Pages.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	Pages.BackgroundTransparency = 1
	Pages.Position = UDim2.new(0, 0, 0, 45)
	Pages.Size = UDim2.new(1, 0, 1, -45)
	
	MakeDraggable(Header, MainFrame)

	local WindowFunctions = {}
	local FirstTab = true

	function WindowFunctions:Tab(name)
		-- Tab Button
		local TabBtn = Instance.new("TextButton")
		TabBtn.Name = name .. "Tab"
		TabBtn.Parent = TabContainer
		TabBtn.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
		TabBtn.Size = UDim2.new(0, 0, 1, 0) -- Width set automatic
		TabBtn.Font = Enum.Font.GothamMedium
		TabBtn.Text = name
		TabBtn.TextColor3 = Color3.fromRGB(150, 150, 150)
		TabBtn.TextSize = 12
		TabBtn.AutoButtonColor = false
		
		local TabCorner = Instance.new("UICorner")
		TabCorner.CornerRadius = UDim.new(1, 0)
		TabCorner.Parent = TabBtn
		
		local TextSize = game:GetService("TextService"):GetTextSize(name, 12, Enum.Font.GothamMedium, Vector2.new(9999, 9999))
		TabBtn.Size = UDim2.new(0, TextSize.X + 20, 1, 0)

		-- Page Frame
		local Page = Instance.new("ScrollingFrame")
		Page.Name = name .. "Page"
		Page.Parent = Pages
		Page.Active = true
		Page.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
		Page.BackgroundTransparency = 1
		Page.BorderSizePixel = 0
		Page.Size = UDim2.new(1, 0, 1, 0)
		Page.ScrollBarThickness = 2
		Page.ScrollBarImageColor3 = Color3.fromRGB(50, 50, 50)
		Page.Visible = false
		
		local PageLayout = Instance.new("UIListLayout")
		PageLayout.Parent = Page
		PageLayout.SortOrder = Enum.SortOrder.LayoutOrder
		PageLayout.Padding = UDim.new(0, 6)
		
		local PagePadding = Instance.new("UIPadding")
		PagePadding.Parent = Page
		PagePadding.PaddingTop = UDim.new(0, 5)
		PagePadding.PaddingLeft = UDim.new(0, 10)
		PagePadding.PaddingRight = UDim.new(0, 10)
		
		PageLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
			Page.CanvasSize = UDim2.new(0, 0, 0, PageLayout.AbsoluteContentSize.Y + 10)
		end)

		-- Logic to switch tabs
		if FirstTab then
			TabBtn.BackgroundColor3 = Color3.fromRGB(50, 50, 50) -- Active color
			TabBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
			Page.Visible = true
			FirstTab = false
		end

		TabBtn.MouseButton1Click:Connect(function()
			for _, v in pairs(Pages:GetChildren()) do
				if v:IsA("ScrollingFrame") then v.Visible = false end
			end
			for _, v in pairs(TabContainer:GetChildren()) do
				if v:IsA("TextButton") then
					TweenService:Create(v, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(35, 35, 35), TextColor3 = Color3.fromRGB(150, 150, 150)}):Play()
				end
			end
			Page.Visible = true
			TweenService:Create(TabBtn, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(50, 50, 50), TextColor3 = Color3.fromRGB(255, 255, 255)}):Play()
		end)

		local TabFunctions = {}

		--// ELEMENT: TOGGLE
		function TabFunctions:Toggle(text, default, callback)
			local ToggleFrame = Instance.new("Frame")
			ToggleFrame.Name = "Toggle"
			ToggleFrame.Parent = Page
			ToggleFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
			ToggleFrame.Size = UDim2.new(1, 0, 0, 35)
			
			local ToggleCorner = Instance.new("UICorner")
			ToggleCorner.CornerRadius = UDim.new(0, 6)
			ToggleCorner.Parent = ToggleFrame
			
			local Label = Instance.new("TextLabel")
			Label.Parent = ToggleFrame
			Label.BackgroundTransparency = 1
			Label.Position = UDim2.new(0, 10, 0, 0)
			Label.Size = UDim2.new(1, -60, 1, 0)
			Label.Font = Enum.Font.Gotham
			Label.Text = text
			Label.TextColor3 = Color3.fromRGB(200, 200, 200)
			Label.TextSize = 13
			Label.TextXAlignment = Enum.TextXAlignment.Left
			
			local SwitchBg = Instance.new("Frame")
			SwitchBg.Name = "SwitchBg"
			SwitchBg.Parent = ToggleFrame
			SwitchBg.AnchorPoint = Vector2.new(1, 0.5)
			SwitchBg.BackgroundColor3 = default and Color3.fromRGB(255, 50, 50) or Color3.fromRGB(50, 50, 50)
			SwitchBg.Position = UDim2.new(1, -10, 0.5, 0)
			SwitchBg.Size = UDim2.new(0, 40, 0, 20)
			
			local SwitchCorner = Instance.new("UICorner")
			SwitchCorner.CornerRadius = UDim.new(1, 0)
			SwitchCorner.Parent = SwitchBg
			
			local SwitchCircle = Instance.new("Frame")
			SwitchCircle.Parent = SwitchBg
			SwitchCircle.AnchorPoint = Vector2.new(0, 0.5)
			SwitchCircle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
			SwitchCircle.Position = default and UDim2.new(1, -18, 0.5, 0) or UDim2.new(0, 2, 0.5, 0)
			SwitchCircle.Size = UDim2.new(0, 16, 0, 16)
			
			local CircleCorner = Instance.new("UICorner")
			CircleCorner.CornerRadius = UDim.new(1, 0)
			CircleCorner.Parent = SwitchCircle
			
			local Toggled = default or false
			
			local Btn = Instance.new("TextButton")
			Btn.Parent = ToggleFrame
			Btn.BackgroundTransparency = 1
			Btn.Size = UDim2.new(1, 0, 1, 0)
			Btn.Text = ""
			
			Btn.MouseButton1Click:Connect(function()
				Toggled = not Toggled
				callback(Toggled)
				
				local TargetColor = Toggled and Color3.fromRGB(255, 50, 50) or Color3.fromRGB(50, 50, 50)
				local TargetPos = Toggled and UDim2.new(1, -18, 0.5, 0) or UDim2.new(0, 2, 0.5, 0)
				
				TweenService:Create(SwitchBg, TweenInfo.new(0.2), {BackgroundColor3 = TargetColor}):Play()
				TweenService:Create(SwitchCircle, TweenInfo.new(0.2), {Position = TargetPos}):Play()
			end)
		end

		--// ELEMENT: SLIDER
		function TabFunctions:Slider(text, min, max, default, callback)
			local SliderFrame = Instance.new("Frame")
			SliderFrame.Name = "Slider"
			SliderFrame.Parent = Page
			SliderFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
			SliderFrame.Size = UDim2.new(1, 0, 0, 50)
			
			local SliderCorner = Instance.new("UICorner")
			SliderCorner.CornerRadius = UDim.new(0, 6)
			SliderCorner.Parent = SliderFrame
			
			local Label = Instance.new("TextLabel")
			Label.Parent = SliderFrame
			Label.BackgroundTransparency = 1
			Label.Position = UDim2.new(0, 10, 0, 5)
			Label.Size = UDim2.new(1, -20, 0, 20)
			Label.Font = Enum.Font.Gotham
			Label.Text = text
			Label.TextColor3 = Color3.fromRGB(200, 200, 200)
			Label.TextSize = 13
			Label.TextXAlignment = Enum.TextXAlignment.Left
			
			local ValueLabel = Instance.new("TextLabel")
			ValueLabel.Parent = SliderFrame
			ValueLabel.BackgroundTransparency = 1
			ValueLabel.Position = UDim2.new(0, 10, 0, 5)
			ValueLabel.Size = UDim2.new(1, -20, 0, 20)
			ValueLabel.Font = Enum.Font.Gotham
			ValueLabel.Text = tostring(default)
			ValueLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
			ValueLabel.TextSize = 13
			ValueLabel.TextXAlignment = Enum.TextXAlignment.Right
			
			local SliderBar = Instance.new("Frame")
			SliderBar.Parent = SliderFrame
			SliderBar.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
			SliderBar.Position = UDim2.new(0, 10, 0, 30)
			SliderBar.Size = UDim2.new(1, -20, 0, 6)
			
			local BarCorner = Instance.new("UICorner")
			BarCorner.CornerRadius = UDim.new(1, 0)
			BarCorner.Parent = SliderBar
			
			local Fill = Instance.new("Frame")
			Fill.Parent = SliderBar
			Fill.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
			Fill.Size = UDim2.new((default - min) / (max - min), 0, 1, 0)
			
			local FillCorner = Instance.new("UICorner")
			FillCorner.CornerRadius = UDim.new(1, 0)
			FillCorner.Parent = Fill
			
			local Trigger = Instance.new("TextButton")
			Trigger.Parent = SliderBar
			Trigger.BackgroundTransparency = 1
			Trigger.Size = UDim2.new(1, 0, 1, 0)
			Trigger.Text = ""
			
			local isDragging = false
			
			local function UpdateSlider(input)
				local SizeX = math.clamp((input.Position.X - SliderBar.AbsolutePosition.X) / SliderBar.AbsoluteSize.X, 0, 1)
				TweenService:Create(Fill, TweenInfo.new(0.05), {Size = UDim2.new(SizeX, 0, 1, 0)}):Play()
				
				local Value = math.floor(min + ((max - min) * SizeX))
				ValueLabel.Text = tostring(Value)
				callback(Value)
			end
			
			Trigger.InputBegan:Connect(function(input)
				if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
					isDragging = true
					UpdateSlider(input)
				end
			end)
			
			UserInputService.InputChanged:Connect(function(input)
				if isDragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
					UpdateSlider(input)
				end
			end)
			
			UserInputService.InputEnded:Connect(function(input)
				if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
					isDragging = false
				end
			end)
		end
		
		--// ELEMENT: BUTTON
		function TabFunctions:Button(text, callback)
			local ButtonFrame = Instance.new("Frame")
			ButtonFrame.Parent = Page
			ButtonFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
			ButtonFrame.Size = UDim2.new(1, 0, 0, 35)
			
			local ButtonCorner = Instance.new("UICorner")
			ButtonCorner.CornerRadius = UDim.new(0, 6)
			ButtonCorner.Parent = ButtonFrame
			
			local Btn = Instance.new("TextButton")
			Btn.Parent = ButtonFrame
			Btn.BackgroundTransparency = 1
			Btn.Size = UDim2.new(1, 0, 1, 0)
			Btn.Font = Enum.Font.Gotham
			Btn.Text = text
			Btn.TextColor3 = Color3.fromRGB(200, 200, 200)
			Btn.TextSize = 13
			
			Btn.MouseButton1Click:Connect(function()
				TweenService:Create(ButtonFrame, TweenInfo.new(0.1), {BackgroundColor3 = Color3.fromRGB(45, 45, 45)}):Play()
				callback()
				wait(0.1)
				TweenService:Create(ButtonFrame, TweenInfo.new(0.1), {BackgroundColor3 = Color3.fromRGB(30, 30, 30)}):Play()
			end)
		end

		--// ELEMENT: COLOR PICKER (Advanced)
		function TabFunctions:ColorPicker(text, default, callback)
			local ColorPickerFrame = Instance.new("Frame")
			ColorPickerFrame.Parent = Page
			ColorPickerFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
			ColorPickerFrame.Size = UDim2.new(1, 0, 0, 35)
			ColorPickerFrame.ClipsDescendants = true
			
			local CPCorner = Instance.new("UICorner")
			CPCorner.CornerRadius = UDim.new(0, 6)
			CPCorner.Parent = ColorPickerFrame
			
			local Label = Instance.new("TextLabel")
			Label.Parent = ColorPickerFrame
			Label.BackgroundTransparency = 1
			Label.Position = UDim2.new(0, 10, 0, 0)
			Label.Size = UDim2.new(1, -50, 0, 35)
			Label.Font = Enum.Font.Gotham
			Label.Text = text
			Label.TextColor3 = Color3.fromRGB(200, 200, 200)
			Label.TextSize = 13
			Label.TextXAlignment = Enum.TextXAlignment.Left
			
			local ColorPreview = Instance.new("Frame")
			ColorPreview.Parent = ColorPickerFrame
			ColorPreview.AnchorPoint = Vector2.new(1, 0.5)
			ColorPreview.BackgroundColor3 = default
			ColorPreview.Position = UDim2.new(1, -10, 0.5, 0)
			ColorPreview.Size = UDim2.new(0, 25, 0, 15)
			
			local CPPrevCorner = Instance.new("UICorner")
			CPPrevCorner.CornerRadius = UDim.new(0, 4)
			CPPrevCorner.Parent = ColorPreview

			-- Toggler
			local ToggleBtn = Instance.new("TextButton")
			ToggleBtn.Parent = ColorPickerFrame
			ToggleBtn.BackgroundTransparency = 1
			ToggleBtn.Size = UDim2.new(1, 0, 1, 0)
			ToggleBtn.Text = ""
			
			local IsOpen = false
			local CurrentColor = default
			local ColorH, ColorS, ColorV = Color3.toHSV(default)
			
			-- PICKER CONTAINER (The Pop-down)
			local PickerContainer = Instance.new("Frame")
			PickerContainer.Name = "PickerContainer"
			PickerContainer.Parent = ColorPickerFrame
			PickerContainer.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
			PickerContainer.BackgroundTransparency = 1
			PickerContainer.Position = UDim2.new(0, 0, 0, 40)
			PickerContainer.Size = UDim2.new(1, 0, 0, 130) -- Height for picker
			
			-- Saturation/Value Square (Image 2 Style)
			local SVBox = Instance.new("Frame")
			SVBox.Parent = PickerContainer
			SVBox.BackgroundColor3 = Color3.fromHSV(ColorH, 1, 1) -- Base Hue
			SVBox.BorderSizePixel = 0
			SVBox.Position = UDim2.new(0, 10, 0, 0)
			SVBox.Size = UDim2.new(0, 120, 0, 120) -- Square
			
			-- Gradients for SV
			local WhiteGrad = Instance.new("UIGradient") -- Left White
			WhiteGrad.Color = ColorSequence.new{
				ColorSequenceKeypoint.new(0, Color3.new(1,1,1)), 
				ColorSequenceKeypoint.new(1, Color3.new(1,1,1))
			}
			WhiteGrad.Transparency = NumberSequence.new{
				NumberSequenceKeypoint.new(0, 0),
				NumberSequenceKeypoint.new(1, 1)
			}
			WhiteGrad.Parent = SVBox
			
			local BlackLayer = Instance.new("Frame") -- Top Transparent to Bottom Black
			BlackLayer.Parent = SVBox
			BlackLayer.BackgroundColor3 = Color3.new(1,1,1)
			BlackLayer.BackgroundTransparency = 0
			BlackLayer.BorderSizePixel = 0
			BlackLayer.Size = UDim2.new(1, 0, 1, 0)
			BlackLayer.ZIndex = 2
			
			local BlackGrad = Instance.new("UIGradient")
			BlackGrad.Color = ColorSequence.new{
				ColorSequenceKeypoint.new(0, Color3.new(0,0,0)), 
				ColorSequenceKeypoint.new(1, Color3.new(0,0,0))
			}
			BlackGrad.Transparency = NumberSequence.new{
				NumberSequenceKeypoint.new(0, 1),
				NumberSequenceKeypoint.new(1, 0)
			}
			BlackGrad.Rotation = 90
			BlackGrad.Parent = BlackLayer
			
			local SVSelector = Instance.new("Frame")
			SVSelector.Parent = BlackLayer
			SVSelector.BackgroundColor3 = Color3.new(1,1,1)
			SVSelector.BorderColor3 = Color3.new(0,0,0)
			SVSelector.Size = UDim2.new(0, 4, 0, 4)
			SVSelector.AnchorPoint = Vector2.new(0.5, 0.5)
			SVSelector.Position = UDim2.new(ColorS, 0, 1 - ColorV, 0)
			SVSelector.ZIndex = 3
			
			-- Hue Strip (Rainbow)
			local HueBar = Instance.new("Frame")
			HueBar.Parent = PickerContainer
			HueBar.BackgroundColor3 = Color3.new(1,1,1)
			HueBar.BorderSizePixel = 0
			HueBar.Position = UDim2.new(0, 140, 0, 0)
			HueBar.Size = UDim2.new(0, 25, 0, 120) -- Strip to the right
			
			local HueGrad = Instance.new("UIGradient")
			HueGrad.Color = ColorSequence.new{
				ColorSequenceKeypoint.new(0.00, Color3.fromRGB(255, 0, 0)),
				ColorSequenceKeypoint.new(0.17, Color3.fromRGB(255, 255, 0)),
				ColorSequenceKeypoint.new(0.33, Color3.fromRGB(0, 255, 0)),
				ColorSequenceKeypoint.new(0.50, Color3.fromRGB(0, 255, 255)),
				ColorSequenceKeypoint.new(0.67, Color3.fromRGB(0, 0, 255)),
				ColorSequenceKeypoint.new(0.83, Color3.fromRGB(255, 0, 255)),
				ColorSequenceKeypoint.new(1.00, Color3.fromRGB(255, 0, 0))
			}
			HueGrad.Rotation = 90
			HueGrad.Parent = HueBar
			
			local HueSelector = Instance.new("Frame")
			HueSelector.Parent = HueBar
			HueSelector.BackgroundColor3 = Color3.new(1,1,1)
			HueSelector.BorderSizePixel = 0
			HueSelector.Size = UDim2.new(1, 0, 0, 2)
			HueSelector.Position = UDim2.new(0, 0, ColorH, 0)
			
			-- Logic
			local function UpdateColor()
				CurrentColor = Color3.fromHSV(ColorH, ColorS, ColorV)
				SVBox.BackgroundColor3 = Color3.fromHSV(ColorH, 1, 1)
				ColorPreview.BackgroundColor3 = CurrentColor
				callback(CurrentColor)
			end
			
			local DraggingSV, DraggingHue = false, false
			
			local function UpdateSV(input)
				local rX = math.clamp((input.Position.X - SVBox.AbsolutePosition.X) / SVBox.AbsoluteSize.X, 0, 1)
				local rY = math.clamp((input.Position.Y - SVBox.AbsolutePosition.Y) / SVBox.AbsoluteSize.Y, 0, 1)
				
				ColorS = rX
				ColorV = 1 - rY
				
				SVSelector.Position = UDim2.new(rX, 0, rY, 0)
				UpdateColor()
			end
			
			local function UpdateHue(input)
				local rY = math.clamp((input.Position.Y - HueBar.AbsolutePosition.Y) / HueBar.AbsoluteSize.Y, 0, 1)
				ColorH = rY
				HueSelector.Position = UDim2.new(0, 0, rY, 0)
				UpdateColor()
			end
			
			-- Input handling
			SVBox.InputBegan:Connect(function(input)
				if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
					DraggingSV = true
					UpdateSV(input)
				end
			end)
			
			HueBar.InputBegan:Connect(function(input)
				if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
					DraggingHue = true
					UpdateHue(input)
				end
			end)
			
			UserInputService.InputChanged:Connect(function(input)
				if (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
					if DraggingSV then UpdateSV(input) end
					if DraggingHue then UpdateHue(input) end
				end
			end)
			
			UserInputService.InputEnded:Connect(function(input)
				if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
					DraggingSV = false
					DraggingHue = false
				end
			end)
			
			ToggleBtn.MouseButton1Click:Connect(function()
				IsOpen = not IsOpen
				if IsOpen then
					TweenService:Create(ColorPickerFrame, TweenInfo.new(0.3), {Size = UDim2.new(1, 0, 0, 170)}):Play()
				else
					TweenService:Create(ColorPickerFrame, TweenInfo.new(0.3), {Size = UDim2.new(1, 0, 0, 35)}):Play()
				end
			end)
		end
		
		--// ELEMENT: DROPDOWN
		function TabFunctions:Dropdown(text, list, callback)
			local DropdownFrame = Instance.new("Frame")
			DropdownFrame.Parent = Page
			DropdownFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
			DropdownFrame.Size = UDim2.new(1, 0, 0, 35)
			DropdownFrame.ClipsDescendants = true
			
			local DropCorner = Instance.new("UICorner")
			DropCorner.CornerRadius = UDim.new(0, 6)
			DropCorner.Parent = DropdownFrame
			
			local Label = Instance.new("TextLabel")
			Label.Parent = DropdownFrame
			Label.BackgroundTransparency = 1
			Label.Position = UDim2.new(0, 10, 0, 0)
			Label.Size = UDim2.new(1, -40, 0, 35)
			Label.Font = Enum.Font.Gotham
			Label.Text = text
			Label.TextColor3 = Color3.fromRGB(200, 200, 200)
			Label.TextSize = 13
			Label.TextXAlignment = Enum.TextXAlignment.Left
			
			local Arrow = Instance.new("TextLabel")
			Arrow.Parent = DropdownFrame
			Arrow.BackgroundTransparency = 1
			Arrow.Position = UDim2.new(1, -30, 0, 0)
			Arrow.Size = UDim2.new(0, 30, 0, 35)
			Arrow.Text = "+"
			Arrow.TextColor3 = Color3.fromRGB(200, 200, 200)
			Arrow.TextSize = 18
			Arrow.Font = Enum.Font.GothamBold
			
			local OpenBtn = Instance.new("TextButton")
			OpenBtn.Parent = DropdownFrame
			OpenBtn.BackgroundTransparency = 1
			OpenBtn.Size = UDim2.new(1, 0, 1, 0)
			OpenBtn.Text = ""
			
			local ItemHolder = Instance.new("Frame")
			ItemHolder.Parent = DropdownFrame
			ItemHolder.BackgroundTransparency = 1
			ItemHolder.Position = UDim2.new(0, 0, 0, 35)
			ItemHolder.Size = UDim2.new(1, 0, 0, 0)
			
			local ItemLayout = Instance.new("UIListLayout")
			ItemLayout.Parent = ItemHolder
			ItemLayout.SortOrder = Enum.SortOrder.LayoutOrder
			
			for _, item in pairs(list) do
				local ItemBtn = Instance.new("TextButton")
				ItemBtn.Parent = ItemHolder
				ItemBtn.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
				ItemBtn.BorderSizePixel = 0
				ItemBtn.Size = UDim2.new(1, 0, 0, 30)
				ItemBtn.Font = Enum.Font.Gotham
				ItemBtn.Text = item
				ItemBtn.TextColor3 = Color3.fromRGB(180, 180, 180)
				ItemBtn.TextSize = 12
				
				ItemBtn.MouseButton1Click:Connect(function()
					Label.Text = text .. " : " .. item
					callback(item)
					-- Close logic here if you want auto-close
				end)
			end
			
			local IsOpen = false
			OpenBtn.MouseButton1Click:Connect(function()
				IsOpen = not IsOpen
				if IsOpen then
					Arrow.Text = "-"
					TweenService:Create(DropdownFrame, TweenInfo.new(0.3), {Size = UDim2.new(1, 0, 0, 35 + (#list * 30))}):Play()
				else
					Arrow.Text = "+"
					TweenService:Create(DropdownFrame, TweenInfo.new(0.3), {Size = UDim2.new(1, 0, 0, 35)}):Play()
				end
			end)
		end

		return TabFunctions
	end

	return WindowFunctions
end

return Library
